#!/bin/bash

# Copyright (C) kelly & richard

# LC_ALL=C 是为了去除所有本地化的设置，让命令能正确执行
export LC_ALL=C
export PROJECT=kr
export VERSION=0.0.0

. auto/options
. auto/init
. auto/sources

test -d $OBJS || mkdir -p $OBJS

echo > $AUTO_HEADERS_H
echo > $AUTOCONF_ERR

if test -z "$PLATFORM"; then
    echo "checking for OS"

	#System Linux
    SYSTEM=`uname -s 2>/dev/null`
	#version
    RELEASE=`uname -r 2>/dev/null`
	#x86 x86_64
    ARCH=`uname -m 2>/dev/null`

    echo " + $SYSTEM $RELEASE $ARCH"

    PLATFORM="$SYSTEM:$RELEASE:$ARCH";

else
    echo "building for $PLATFORM"
    SYSTEM=$PLATFORM
fi

. auto/cc/conf

. auto/os/conf

. auto/make

. auto/install

